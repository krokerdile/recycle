# Member DEVELOP

## 목차

| 정보                | DEVELOP 바로가기              | API 바로가기                          |
|-------------------|---------------------------|-----------------------------------|
| 멤버 정보를 조회합니다.     | [바로가기](#멤버-정보를-조회합니다)     | [바로가기](./API.md#멤버-정보를-조회합니다)     |
| 회원가입을 진행합니다.      | [바로기기](#회원가입을-진행합니다)      | [바로기기](./API.md#회원가입을-진행합니다)      |
| 아이디 중복 검사를 진행합니다. | [바로가기](#아이디-중복-검사를-진행합니다) | [바로가기](./API.md#아이디-중복-검사를-진행합니다) |
| 이메일 인증 요청을 진행합니다. | [바로가기](#이메일-인증-요청을-진행합니다) | [바로가기](./API.md#이메일-인증-요청을-진행합니다) |
| 이메일 인증 번호 확인합니다.  | [바로가기](#이메일-인증-번호-확인합니다)  | [바로가기](./API.md#이메일-인증-번호-확인합니다)  |
| 회원정보를 수정합니다.      | [바로가기](#회원정보를-수정합니다)      | [바로가기](./API.md#회원정보를-수정합니다)      |
| 회원 탈퇴를 진행합니다.     | [바로가기](#회원-탈퇴를-진행합니다)     | [바로가기](./API.md#회원-탈퇴를-진행합니다)     |
| 로그인을 진행합니다.       | [바로가기](#로그인을-진행합니다)       | [바로가기](./API.md#로그인을-진행합니다)       |
| 로그아웃을 진행합니다.      | [바로가기](#로그아웃을-진행합니다)      | [바로가기](./API.md#로그아웃을-진행합니다)      |
| 토큰을 갱신합니다.        | [바로가기](#토큰을-갱신합니다)        | [바로가기](./API.md#토큰을-갱신합니다)        |
| 증명(아이디)를 조회합니다.   | [바로가기](#증명아이디를-조회합니다)     | [바로가기](./API.md#증명아이디를-조회합니다)     |
| 비밀번호를 찾습니다.       | TODO                      | TODO                              |
| 깃허브를 연결합니다.       | TODO                      | TODO                              |

## 멤버 정보를 조회합니다.

### 설계

1. 아이디를 통해 멤버를 조회합니다.
2. 조회하려는 멤버가 존재하는지 확인합니다.
3. 멤버 정보를 반환합니다.

### 예외

| 관련 번호 | 처리                      |
|-------|-------------------------|
| 2     | 멤버가 존재하지 않으면 예외를 발생시킨다. |

### 쿼리

| 관련 번호 | 쿼리                   |
|-------|----------------------|
| 1     | `id` 를 통해 멤버를 조회합니다. |

## 회원가입을 진행합니다.

### 설계

1. 중복된 증명(아이디)가 존재하는지 다시 확인합니다.
2. 비밀번호가 조건을 충족하는지 확인합니다.
3. 비밀번호를 암호화합니다.
4. 회원가입을 진행합니다.

### 이벤트

- 회원가입 이벤트를 발행합니다.

### 예외

| 관련 번호 | 처리                            |
|-------|-------------------------------|
| 1     | 중복된 증명(아이디)이 존재하면 예외를 발생시킵니다. |

### 쿼리

| 관련 번호 | 쿼리                                   |
|-------|--------------------------------------|
| 1     | `certification` 를 통해 증명(아이디)를 조회합니다. |
| 4     | 멤버 정보를 저장합니다.                        |

## 아이디 중복 검사를 진행합니다.

### 설계

1. 증명(아이디)가 존재하는지 확인합니다.
2. 존재 여부 결과를 반환합니다.

### 예외

### 쿼리

| 관련 번호 | 쿼리                                   |
|-------|--------------------------------------|
| 1     | `certification` 를 통해 증명(아이디)를 조회합니다. |

## 이메일 인증 요청을 진행합니다.

### 설계

1. 이미 등록된 이메일인지 확인합니다.
2. 식별 임시값(nonce)을 저장합니다.
3. 인증 값을 포함한 이메일을 전송을 요청합니다.
4. 등록된 이메일 여부 결과를 반환합니다.

### 예외

| 관련 번호 | 처리                        |
|-------|---------------------------|
| 1     | 중복된 이메일이 존재하면 예외를 발생시킵니다. |
| 3     | 이메일이 정상적으로 전송되지 않을 수 있다.  |

### 쿼리

| 관련 번호 | 쿼리                         |
|-------|----------------------------|
| 1     | `email` 를 통해 이메일 조회합니다.    |
| 2     | `email`, `nonce` 값을 저장합니다. |
| 3     | `email`, `인증값` 을 저장합니다.    |

### 특이 사항

- 이메일 인증 요청시 발급되는 임시값을 Redis와 같은 임시 저장소를 활용하여 저장합니다.
- 임시값은 일정 시간이 지나면 해당 내역을 저장(백업) 후 자동으로 삭제됩니다.
- 이메일 전송 실패에 대해 **전송 실패 이벤트**를 구독하여 처리합니다.

## 이메일 인증 번호 확인합니다.

### 설계

1. 이메일 인증값을 확인합니다.
2. 이메일 인증 요청시 저장한 식별 임시값(nonce)과 확인 요청시 임시값을 비교합니다.
3. 아이디를 통해 멤버 정보를 조회합니다.
4. 이메일 정보를 멤버 정보에 저장합니다.
5. 인증 여부 결과를 반환합니다.

### 이벤트

- 이메일 등록 이벤트를 발행합니다.

### 예외

| 관련 번호 | 처리                                               |
|-------|--------------------------------------------------|
| 1     | 인증 번호를 발급한 이메일이 아니면 예외를 발생합니다.                   |
| 2     | 요청과 확인의 임시값이 다르면 예외를 발생합니다. 추가로 실패 횟수를 업데이트 합니다. |

### 쿼리

| 관련 번호 | 쿼리                             |
|-------|--------------------------------|
| 1     | `email` 을 통해 인증값을 조회합니다.       |
| 3     | `id` 를 통해 멤버 정보를 조회합니다.        |
| 4     | `email` 정보를 저장합니다.             |
| 5     | `email` 을 통해 `nonce` 값을 조회합니다. |

### 특이 사항

- 이메일 인증 요청을 한 세션에서 인증을 시도하여야 합니다.<br/> -> 다른 세션에서 요청한다면 잘못된 요청이라 판단하고 예외를 처리해야 합니다.<br/> -> 해당 요청에
  대한 정보를 저장합니다.

## 회원정보를 수정합니다.

### 설계

1. 멤버 정보를 조회합니다.
2. 조회한 멤버 정보를 수정합니다.

- 중복된 증명(아이디)가 존재하는지 다시 확인합니다.
- 비밀번호가 조건을 충족하는지 확인합니다.

### 이벤트

- 멤버 정보 수정 이벤트를 발행합니다.

### 예외

| 관련 번호 | 처리                            |
|-------|-------------------------------|
| 1     | 중복된 증명(아이디)이 존재하면 예외를 발생시킵니다. |
| 2     | 비밀번호 조건에 충족하지 않으면 예외를 발생시킵니다. |

### 쿼리

| 관련 번호 | 쿼리                                          |
|-------|---------------------------------------------|
| 1     | `id` 을 통해 멤버 정보를 조회합니다.                     |
| 2     | `certification` 을 중복된 증명(아이디)가 존재하는지 조회합니다. |
| 2     | 변경된 정보를 저장합니다.                              |

## 회원 탈퇴를 진행합니다.

### 설계

1. 멤버 정보를 조회합니다.
2. 조회한 멤버를 삭제합니다.

### 이벤트

- 회원 탈퇴 이벤트를 발행합니다.

### 예외

### 쿼리

| 관련 번호 | 쿼리                      |
|-------|-------------------------|
| 1     | `id` 을 통해 멤버 정보를 조회합니다. |
| 2     | 삭제 처리를 진행합니다.           |

## 로그인을 진행합니다.

### 설계

1. 증명을 통해 멤버 정보를 조회합니다.
2. 조회한 멤버 정보를 통해 비밀번호를 확인합니다.
3. 토큰을 반환합니다.

### 이벤트

- 로그인 이벤트를 발행합니다.

### 예외

### 쿼리

| 관련 번호 | 쿼리                                 |
|-------|------------------------------------|
| 1     | `certification` 을 통해 멤버 정보를 조회합니다. |

## 로그아웃을 진행합니다.

### 설계

1. 아이디를 통해 멤버 정보를 조회합니다.
2. 로그아웃을 진행합니다.

### 이벤트

- 로그아웃 이벤트를 발행합니다.

### 예외

### 쿼리

| 관련 번호 | 쿼리                   |
|-------|----------------------|
| 1     | `id` 를 통해 멤버를 조회합니다. |

## 토큰을 갱신합니다.

### 설계

1. 토큰이 유효한지 확인합니다.
2. 아이디를 통해 멤버 정보를 조회합니다.
3. 토큰을 갱신합니다.

### 예외

| 관련 번호 | 처리                       |
|-------|--------------------------|
| 1     | 토큰이 유효하지 않으면 예외를 발생시킵니다. |
| 2     | 멤버가 존재하지 않으면 예외를 발생시킨다.  |

### 쿼리

| 관련 번호 | 쿼리                   |
|-------|----------------------|
| 2     | `id` 를 통해 멤버를 조회합니다. |

## 증명(아이디)를 조회합니다.

### 설계

1. 증명(아이디)를 통해 멤버 정보를 조회합니다.
2. 조회한 멤버 정보를 반환합니다.

### 예외

| 관련 번호 | 처리                      |
|-------|-------------------------|
| 1     | 멤버가 존재하지 않으면 예외를 발생시킨다. |

### 쿼리

| 관련 번호 | 쿼리                              |
|-------|---------------------------------|
| 1     | `certification` 를 통해 멤버를 조회합니다. |
