# COMMENT DEVELOP

---
## 댓글 생성

### 설계
1. 클라이언트에서 `question_id`, `content`, `parent_id`를 받는다.
2. 토큰의 정보를 통해 얻은 작성자의 정보와 작성일자와 같은 정보들을 조합한다.
3. 조합한 정보를 DB에 저장한다.

### 예외
| 번호 | 처리 |
|----|---|
| 1 | 토큰에 담긴 유저에 대한 정보가 없을경우 |

### 쿼리
| 번호 | 쿼리                                                                                                                  |
|----|---------------------------------------------------------------------------------------------------------------------|
| 1 | `comment_id`, `question_id`, `content`, `author`, `author_id`, `parent_id`, `created_at`, `updated_at` 값을 저장한다.       |

---
## 질문 글 기준 댓글 코멘트 조회

### 설계
1. 클라이언트에서 `question_id`를 받는다.
2. `question_id`를 통해 DB에서 댓글 목록을 조회한다.
3. 조회한 댓글 목록을 클라이언트에게 전달한다.
4. 만약 정보가 없을 경우 빈 배열을 전달한다.

### 예외
| 번호 | 처리 |
|----|---|
| 1 | `question_id`에 해당하는 댓글이 없을 경우 |

### 쿼리
| 번호 | 쿼리                          |
|----|-----------------------------|
| 1 | `question_id`를 통해 댓글을 조회한다. |

---
## 댓글 수정

### 설계
1. 클라이언트에서 `comment_id`, `question_id`, `content`, `parent_id`를 받는다.
2. `comment_id`를 통해 DB에서 댓글을 조회한다.
3. 조회한 댓글의 작성자와 토큰의 정보를 통해 얻은 작성자의 정보를 비교한다.
4. 작성자가 맞다면 댓글을 수정한다.

### 예외
| 번호 | 처리                            |
|----|-------------------------------|
| 1 | `comment_id`에 해당하는 댓글이 없을 경우 |
| 2 | 토큰에 담긴 유저에 대한 정보가 없을 경우       |

### 쿼리
| 번호 | 쿼리                                                                                                                                        |
|----|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1 | `comment_id` 를 통해 댓글을 조회한다.                                                                                                              |
| 1 | `comment_id`, `question_id`,`content`, `author`, `author_id`, `parent_id`, `created_at`, `updated_at` 값을 comment 서버에 수정하여 저장한다.       |

---
## 댓글 삭제

### 설계
1. 클라이언트에서 `comment_id`를 받는다.
2. `comment_id`를 통해 DB에서 댓글을 조회한다.
3. 조회한 댓글의 작성자와 토큰의 정보를 통해 얻은 작성자의 정보를 비교한다.
4. 작성자가 맞다면 댓글을 삭제한다.

### 예외
| 번호 | 처리                            |
|----|-------------------------------|
| 1 | `comment_id`에 해당하는 댓글이 없을 경우 |
| 2 | 토큰에 담긴 유저에 대한 정보가 없을 경우       |
| 3 | 댓글 작성자와 해당 멤버가 다를 경우 |

### 쿼리
| 번호 | 쿼리                                         |
|----|--------------------------------------------|
| 1 | `comment_id` 를 통해 comment 댓글을 조회한다.        |
| 2 | `comment_id` 를 통해 댓글을 삭제한다.                |